{% extends '_base.html' %}

{% block title %}NPO-RM - Datasets{% endblock title %}
{% block content %}

<h1 class="mt-4" data-toggle="tooltip" data-placement="left"
    title="Dit scherm toont (default) de datasets die voor jouw organisatieonderdelen actief zijn. Hier zie je dus
           hoe actueel de gegevens zijn waarmee je je rapportages bekijkt. Je kan ook de niet actieve bekijken.
           En door te klikken op 'mijn datasets' filter je op alleen die datasets waar jij verantwoordelijk voor bent
           en dus kan activeren of deactiveren.">
    Datasets
</h1>

<nav aria-label="breadcrumb">
  <ol class="breadcrumb bg-light">
    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Datasets</li>
  </ol>
</nav>

<nav class="navbar navbar-expand-lg ">
 <ul class="navbar-nav">
    <li class="nav-item">
      {%  if active == 'True' %}
          <a href="?active=All&my_datasets={{ my_datasets }}" class="btn btn-outline-secondary navbar-btn btn-sm active"
             aria-pressed="true">
              Actief</a>
      {% else %}
          <a href="?active=True&my_datasets={{ my_datasets }}"  class="btn btn-outline-secondary navbar-btn btn-sm">
              Actief</a>
      {% endif %}
    </li>
    <li class="nav-item">
        {%  if my_datasets == 'True' %}
          <a href="?active={{ active }}&my_datasets=False" class="btn btn-outline-secondary navbar-btn btn-sm active" aria-pressed="true"
             data-toggle="tooltip" title="Toont de datasets waar jij, vanuit je rol en afd/cluster/team indeling verantwoordelijk voor bent.">
          Mijn Datasets</a>
      {% else %}
          <a href="?active={{ active }}&my_datasets=True"  class="btn btn-outline-secondary navbar-btn btn-sm"
             data-toggle="tooltip" title="Toont de datasets waar jij, vanuit je rol en afd/cluster/team indeling verantwoordelijk voor bent.">
          Mijn Datasets</a>
      {% endif %}
        </li>
    <li class="nav-item">
      <div class="navbar-header">
      <select class="custom-select" id="datasettype-select">
          <option selected>Dataset...</option>
          <option value="1">Contracten</option>
          <option value="2">Risks</option>
      </select>
      </div>
    </li>
 </ul>
</nav>




    <table class="table table-sm table-hover table-striped table-bordered" id="datasets_table">
    <thead class="thead-dark ">
    <tr>
        <th>Id</th>
        <th>System</th>
        <th>Dataset Type</th>
        <th>Interface Type</th>
        <th>Status</th>
        <th>Gebruiker</th>
        <th>Datum/tijd</th>
        <th>Organisatie</th>
        <th># rows ok</th>
        <th># rows warning</th>
    </tr>
    </thead>
    {% for dataset in dataset_list %}
        {%  if dataset.details_url %}
            <tr class='clickable-row' data-url={{ dataset.details_url }}>
            <td><a href="{{ dataset.details_url }}">{{  dataset.id }}</a></td>
        {% else %}
            <tr>
            <td>{{  dataset.id }}</td>
        {% endif %}
        <td>{{  dataset.system }}</td>
        <td>{{  dataset.dataset_type}}</td>
        <td>{{  dataset.interface_type}}</td>
        <td class="{{ dataset.status.lower }}-upload-status">{{  dataset.status }}</td>
        <td>{{  dataset.username}}</td>
        <td>{{  dataset.date_time |date:'Y-m-d H:i' }}</td>
        <td>{{  dataset.org_unit }}</td>
        <td>{{  dataset.data_rows_ok }}</td>
        <td>{{  dataset.data_rows_warning }}</td>
    </tr>
    {% endfor %}
</table>

{% endblock content %}}